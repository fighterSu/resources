# 问题记录

## 使用Jquery出现的问题

**在jsp文件之中，要注意正确使用Jquery的函数，比如\$("#id")等函数，如果写成\${"#id"}，实际上这对于jsp而言是没有语法错误的，那么实际上执行过程之中，会在控制台看到函数不存在的提示。以后碰到这种情况可以考虑是否是js函数语法错误导致的。**

```jsp
<%--
  Author: fighterSu
  Date: 2021/10/16 12:29
--%>
<%@ page contentType="text/html;charset=UTF-8" %>
<%--<script src="webjars/jquery/3.6.0/jquery.min.js"></script>--%>
<html>
    <head>
        <title>JQuery测试</title>
    </head>
    <body onload="x()">
        <script type="text/javascript">
            function showTextInfo() {
                alert("点击了单击按钮")
                let a = ${"#text1"};// 这里写错了，应该是()而不是{}
                alert(a.value);
            }

            function x() {
                alert("加载页面!");
            }
        </script>
        <input type="text" id="key" value="测试文本"><br><br>
        <input type="button" value="单击按钮" onclick="showTextInfo()">
    </body>
</html>
```

![image-20211016211621413](https://gitee.com/fighterSu/resources/raw/image/typora/202110162116534.png)



## 数据库碰到的问题

1. 创建存储过程和函数varchar等输入参数都需要带位数限制，不然会报错

2. 在IDEA里面使用数据库语句，**在表前面加上数据库名**，就不会报红了，比如查询在数据库su之中的student表的id和name

   ```sql
   select id,name from su.student;
   ```

   



### Mybatis之中的模糊查询

- 将%，\_包含在参数里面传进来
- 在mapper文件里面进行设置

> mapper.xml

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fightersu.dao.PrimaryStudentDao">
    <select id="selectUseFieldAlias" resultType="com.fightersu.entity.PrimaryStudent">
        select id as stuId, name as stuName, age as stuAge
        from su.student
        where name like #{stuName}
           or age = #{stuAge}
    </select>

    <resultMap id="primaryStudentMap"
               type="com.fightersu.entity.PrimaryStudent">
        <id column="id" property="stuId"/>
        <result column="name" property="stuName"/>
        <result column="age" property="stuAge"/>
    </resultMap>

    <select id="selectUseDiffResultMap" resultMap="primaryStudentMap">
        select id, name, age
        from su.student
        where name like '%${stuName}'
           or age = #{stuAge}
    </select>
</mapper>

```

> 测试类

```java
package com.fightersu;

import com.fightersu.dao.PrimaryStudentDao;
import com.fightersu.entity.PrimaryStudent;
import com.fightersu.utils.MyBatisUtil;
import org.apache.ibatis.session.SqlSession;
import org.junit.Test;

import java.util.List;

/**
 * @author fighterSu
 * @date 2021/11/1 12:29
 */
public class TestMyBatis {
    @Test
    public void testSolveWithRename() {
        SqlSession session = MyBatisUtil.getSqlSession();
        if (session != null) {
            PrimaryStudentDao dao = session.getMapper(PrimaryStudentDao.class);
            PrimaryStudent stu = new PrimaryStudent();
            stu.setStuName("张丽");
            stu.setStuAge(21);
            List<PrimaryStudent> list = dao.selectUseFieldAlias(stu);
            list.forEach(System.out::println);
        }
    }

    @Test
    public void testSolveWithResultMap() {
        SqlSession session = MyBatisUtil.getSqlSession();
        if (session != null) {
            PrimaryStudentDao dao = session.getMapper(PrimaryStudentDao.class);
            PrimaryStudent stu = new PrimaryStudent();
            stu.setStuName("丽");
            stu.setStuAge(19);
            List<PrimaryStudent> list = dao.selectUseDiffResultMap(stu);
            list.forEach(System.out::println);
        }
    }
}

```



































